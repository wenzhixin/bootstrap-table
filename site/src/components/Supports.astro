<style>
  .supports-container {
    margin-top: 3rem;
  }

  .support-description {
    margin-bottom: 1.5rem;
    color: #6c757d;
  }

  .support-item {
    display: inline-block;
    margin: 0.25rem;
    text-decoration: none;
  }

  .support-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 2px solid #e9ecef;
    transition: border-color 0.2s ease-in-out;
  }

  .support-avatar:hover {
    border-color: #0d6efd;
  }

  .support-avatar.Backer {
    border-color: #198754;
  }

  .support-avatar.Bronze {
    border-color: #fd7e14;
  }

  .support-avatar.Gold {
    border-color: #ffc107;
  }
</style>

<div class="container border-bottom supports-container">
  <div class="pt-5">
    <h3>Support the Team</h3>

    <div>
      Through contributions, donations, and sponsorship, you allow bootstrap-table to thrive.
    </div>
  </div>

  <div id="supports"></div>
</div>

<script>
  $(function () {
    $.getJSON('https://examples.wenzhixin.net.cn/opencollective/supports.json', function (res) {
      const ranks = [
        {
          title: 'Gold',
          minimum: 200
        },
        {
          title: 'Bronze',
          minimum: 20,
          maximum: 200
        },
        {
          title: 'Backer',
          maximum: 20
        }
      ]

      ranks.forEach(function (rank) {
        rank.supports = res.filter(function (row) {
          return row.totalDonations >= (rank.minimum || 0) &&
            row.totalDonations < (rank.maximum || Number.MAX_VALUE)
        })
      })

      const supportsContainer = document.getElementById('supports')

      ranks.forEach(function (rank) {
        if (rank.supports.length > 0) {
          const rankDiv = document.createElement('div')

          rankDiv.className = 'supports pt-5 pb-5'

          rankDiv.innerHTML = `
            <div>
              <h3>${rank.title} Sponsors</h3>
            </div>

            ${rank.title === 'Backer' ? `
              <div class="support-description">
                The following <b>Backers</b> are individuals who have contributed various amounts of money in order to help support bootstrap-table.
                Every little bit helps, and we appreciate even the smallest contributions.
                <a href="https://opencollective.com/bootstrap-table#sponsor" target="_blank">
                  Become a backer
                </a>
              </div>
            ` : `
              <div class="support-description">
                <b>${rank.title} Sponsors</b> are those who have pledged $${rank.minimum}${rank.maximum ? ` to $${rank.maximum}` : ' or more'} to bootstrap-table.
                <a href="https://opencollective.com/bootstrap-table#section-contribute" target="_blank">
                  Become a sponsor
                </a>
              </div>
            `}

            <div>
              ${rank.supports.map(support => `
                <a
                  href="${support.website || `https://opencollective.com/${support.slug}`}"
                  title="$${support.totalDonations} by ${support.name || support.slug}"
                  class="support-item"
                  target="_blank"
                  rel="${support.rel || 'nofollow'}"
                >
                  <img
                    class="support-avatar ${rank.title}"
                    src="${support.avatar || ''}"
                    alt="${support.name || support.slug}"
                    onerror="if (this.src !== '${support.profileAvatar || ''}') { this.src='${support.profileAvatar || ''}' }"
                  />
                </a>
              `).join('')}
            </div>
          `

          supportsContainer.appendChild(rankDiv)
        }
      })
    })
  })
</script>
